<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Trinity Mission Wall</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script> -->
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript">
    </script>
  </head>
  <body>
    <div class="main">
        <div class="left"></div>
        <div class="right" id="right"></div>
      </div>
        <span class="nav nav--up" id="nav--up"><img src="up.png" /></span>
        <span class="nav nav--down" id="nav--down"><img src="down.png" /></span>
    <script>
      function Card(id, longDesc, img, video) {
        this.desc = longDesc;
        this.img = img;
        this.video = video;

        var container = document.getElementById("right");
        var card = document.createElement("div");
        card.className = "card";
        card.id = "card_" + id;

        var close = document.createElement("div");
        close.className = "close";
        close.id = "close";
        close.innerHTML = "Close";
        card.appendChild(close);

        var img = document.createElement('div');
        img.className = "img";
        img.style.backgroundImage = "url(" + this.img + ")";
        card.appendChild(img);

        var bio = document.createElement('div');
        bio.className = "info";
        bio.innerHTML = this.desc
        card.appendChild(bio)

        var vid = document.createElement('div');
        vid.className = "video"
        vid.id = "video";
        vid.innerHTML = this.video;
        card.appendChild(vid);

        this.create = function() {
          container.appendChild(card);
        }
      }
    $(document).ready(function() {
      $.getJSON("data.json", function(data) {
      for(var i=0; i<data.missions.length; i++) {
        $(".left").append(
          "<div class='card--small' id='" + data.missions[i].id +"'><h2>" + data.missions[i].content.name + "</h2></div>"
        );
      }
    })
  })

  $(".left").on("click", ".card--small", function() {
    var id = $(this).attr('id');
    $("#right").empty();
    $.getJSON("data.json").done(function(data) {
      for(var j=0; j<data.missions.length; j++) {
        console.log(id == data.missions[j].id)
        if(id == data.missions[j].id) {
          var card = new Card(data.missions[j].id, data.missions[j].content.longDesc, data.missions[j].content.img, data.missions[j].content.vid);
          card.create();
        }
      }
    })
  })

    $(".right").on("click", "#close", function() {
      $(".card").empty();
    })

    // function toggleVideo(state) {
    //   var div = document.getElementById("video");
    //   console.log(div)
    //   var iframe = div.getElementsByTagName("iframe")[0].contentWindow;
    //   div.style.display = state == 'hide' ? 'none' : '';
    //   func = state == 'hide' ? 'pauseVideo' : 'playVideo';
    //   iframe.postMessage(' {"event":"command", "func":"' + func + '","args":""}','*');
    // }

    function scroll() {
      $(".page__block--left").animate({
        scrollTop: amount
      }, 100, 'linear', function() {
        if (amount != '') {
          scroll();
        }
      })
    }
    // setInterval(function() {
    //   $(".nav--down").effect("bounce", { distance: -15, times: 3 }, 1000 );
    //   $(".nav--up").effect("bounce", {distance: 15, times: 3 }, 1000 );
    // }, 5000);
    //
    // $("#nav--up").hover(function() {
    //   amount = '-=30';
    //   scroll();
    // }, function() {
    //   amount = '';
    // });
    // $("#nav--down").hover(function() {
    //   amount = '+=30';
    //   scroll();
    // }, function() {
    //   amount = '';
    // })
    </script>
  </body>
</html>
